@using TableApp.Data
@using TableApp.Models

@page "/records";
<h3>Records</h3>

@*CurrentPage="CurrentPage" PageSize="PageSize"*@

<RecordsTable ColumnsSet="_columns" Records="_records" OnSortColumnId="@SetSortedColumn" OnSortDirection="@SetSortDirection" OnSortCallback="FetchRecords"></RecordsTable>
<RecordsPagination CurrentPage="CurrentPage" PageSize="PageSize"></RecordsPagination>

@code {
    readonly TableColumn[]? _columns = {
        new()
        {
            ColumnId = "PriceHub",
            ColumnName = "Price hub"
        },
        new()
        {
            ColumnId = "HighPrice",
            ColumnName = "High price $/MWh"
        },
        new()
        {
            ColumnId = "LowPrice",
            ColumnName = "Low price $/MWh"
        },
        new()
        {
            ColumnId = "WtdAvgPrice",
            ColumnName = "Wth avg price $/MWh"
        },
        new()
        {
            ColumnId = "Change",
            ColumnName = "Change"
        },
        new()
        {
            ColumnId = "DailyVolume",
            ColumnName = "Daily volume MWh"
        },
        new()
        {
            ColumnId = "TradeDate",
            ColumnName = "Dates"
        }
    };

    protected override async Task OnInitializedAsync()
    {
        PageSize = PageSize > 0 ? PageSize : 10;
        CurrentPage = CurrentPage > 0 ? CurrentPage : 1;
        await FetchRecords();
    }
}
